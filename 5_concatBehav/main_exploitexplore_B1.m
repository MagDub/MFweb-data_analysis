addpath('./functions/')

load('../usermat_completed.mat')

data_fold = ('../../data/');

block_ = 1;

%%%%%
[chosenOptionFreqABD,chosenOptionFreqABD_desc,exploitMatABD_LH, exploitMatABD_LH_desc, FreqisExploited_ABD, FreqisExplored_ABD, chosenOptionFreqABD_splitinAB, chosenOptionFreqABD_splitinAB_desc]=make_exploit_option_ABD_perblock(usermat_completed, block_);
[chosenOptionFreqAB,chosenOptionFreqAB_desc,exploitMatAB_LH, exploitMatAB_LH_desc, FreqisExploited_AB, FreqisExplored_AB, chosenOptionFreqAB_splitinAB, chosenOptionFreqAB_splitinAB_desc]=make_exploit_option_AB_perblock(usermat_completed, block_);
[chosenOptionFreqBD,chosenOptionFreqBD_desc,exploitMatBD_LH, exploitMatBD_LH_desc, FreqisExploited_BD, FreqisExplored_BD]=make_exploit_option_BD_perblock(usermat_completed,block_);
[chosenOptionFreqAD,chosenOptionFreqAD_desc,exploitMatAD_LH, exploitMatAD_LH_desc, FreqisExploited_AD, FreqisExplored_AD]=make_exploit_option_AD_perblock(usermat_completed,block_);

for ID_n = 1:size(usermat_completed,2)
    part = usermat_completed(ID_n);
    if round(chosenOptionFreqAD(ID_n,1)) ~= (FreqisExploited_AD{ID_n}.TreeA_SH+FreqisExploited_AD{ID_n}.TreeB_SH)
        disp(strcat('something wrong with part',int2str(part)))
    end
end

chosenOption.ABD.desc = chosenOptionFreqABD_desc;
chosenOption.ABD.freq = chosenOptionFreqABD;
chosenOption.AB.desc = chosenOptionFreqAB_desc;
chosenOption.AB.freq = chosenOptionFreqAB;
chosenOption.BD.desc = chosenOptionFreqBD_desc;
chosenOption.BD.freq = chosenOptionFreqBD;
chosenOption.AD.desc = chosenOptionFreqAD_desc;
chosenOption.AD.freq = chosenOptionFreqAD;

 
for ID_n=1:size(usermat_completed,2)
    FreqisExploited_TreeA_LH(ID_n) = FreqisExploited_ABD{ID_n}.TreeA_LH + FreqisExploited_AB{ID_n}.TreeA_LH + FreqisExploited_BD{ID_n}.TreeA_LH + FreqisExploited_AD{ID_n}.TreeA_LH;
    FreqisExploited_TreeA_SH(ID_n) = FreqisExploited_ABD{ID_n}.TreeA_SH + FreqisExploited_AB{ID_n}.TreeA_SH + FreqisExploited_BD{ID_n}.TreeA_SH + FreqisExploited_AD{ID_n}.TreeA_SH;
    FreqisExploited_TreeB_LH(ID_n) = FreqisExploited_ABD{ID_n}.TreeB_LH + FreqisExploited_AB{ID_n}.TreeB_LH+ FreqisExploited_BD{ID_n}.TreeB_LH + FreqisExploited_AD{ID_n}.TreeB_LH;
    FreqisExploited_TreeB_SH(ID_n) = FreqisExploited_ABD{ID_n}.TreeB_SH + FreqisExploited_AB{ID_n}.TreeB_SH + FreqisExploited_BD{ID_n}.TreeB_SH + FreqisExploited_AD{ID_n}.TreeB_SH;
end

for ID_n=1:size(usermat_completed,2)
    FreqisExplored_TreeA_LH(ID_n) = FreqisExplored_ABD{ID_n}.TreeA_LH + FreqisExplored_AB{ID_n}.TreeA_LH + FreqisExplored_BD{ID_n}.TreeA_LH + FreqisExplored_AD{ID_n}.TreeA_LH;
    FreqisExplored_TreeA_SH(ID_n) = FreqisExplored_ABD{ID_n}.TreeA_SH + FreqisExplored_AB{ID_n}.TreeA_SH + FreqisExplored_BD{ID_n}.TreeA_SH + FreqisExplored_AD{ID_n}.TreeA_SH;
    FreqisExplored_TreeB_LH(ID_n) = FreqisExplored_ABD{ID_n}.TreeB_LH + FreqisExplored_AB{ID_n}.TreeB_LH+ FreqisExplored_BD{ID_n}.TreeB_LH + FreqisExplored_AD{ID_n}.TreeB_LH;
    FreqisExplored_TreeB_SH(ID_n) = FreqisExplored_ABD{ID_n}.TreeB_SH + FreqisExplored_AB{ID_n}.TreeB_SH + FreqisExplored_BD{ID_n}.TreeB_SH + FreqisExplored_AD{ID_n}.TreeB_SH;
end

for ID_n=1:size(usermat_completed,2)
    FreqisExploited_TreeA_LH_ACD_BCD(ID_n) = FreqisExploited_BD{ID_n}.TreeA_LH + FreqisExploited_AD{ID_n}.TreeA_LH;
    FreqisExploited_TreeA_SH_ACD_BCD(ID_n) = FreqisExploited_BD{ID_n}.TreeA_SH + FreqisExploited_AD{ID_n}.TreeA_SH;
    FreqisExploited_TreeB_LH_ACD_BCD(ID_n) = FreqisExploited_BD{ID_n}.TreeB_LH + FreqisExploited_AD{ID_n}.TreeB_LH;
    FreqisExploited_TreeB_SH_ACD_BCD(ID_n) = FreqisExploited_BD{ID_n}.TreeB_SH + FreqisExploited_AD{ID_n}.TreeB_SH;
end

for ID_n=1:size(usermat_completed,2)
    FreqisExplored_TreeA_LH_ACD_BCD(ID_n) = FreqisExplored_BD{ID_n}.TreeA_LH + FreqisExplored_AD{ID_n}.TreeA_LH;
    FreqisExplored_TreeA_SH_ACD_BCD(ID_n) = FreqisExplored_BD{ID_n}.TreeA_SH + FreqisExplored_AD{ID_n}.TreeA_SH;
    FreqisExplored_TreeB_LH_ACD_BCD(ID_n) = FreqisExplored_BD{ID_n}.TreeB_LH + FreqisExplored_AD{ID_n}.TreeB_LH;
    FreqisExplored_TreeB_SH_ACD_BCD(ID_n) = FreqisExplored_BD{ID_n}.TreeB_SH + FreqisExplored_AD{ID_n}.TreeB_SH;
end

FreqisExploited_desc = {'A_LH', 'A_SH', 'B_LH', 'B_SH'};
FreqisExplored_desc = {'A_LH', 'A_SH', 'B_LH', 'B_SH'};

FreqisExploited = [FreqisExploited_TreeA_LH', FreqisExploited_TreeA_SH', FreqisExploited_TreeB_LH', FreqisExploited_TreeB_SH'];
FreqisExplored = [FreqisExplored_TreeA_LH', FreqisExplored_TreeA_SH', FreqisExplored_TreeB_LH', FreqisExplored_TreeB_SH'];

save(strcat(data_fold, 'data_for_figs/chosenOption_B1.mat'), 'chosenOption')
save(strcat(data_fold, 'data_for_figs/FreqisExploited_B1.mat'), 'FreqisExploited')
save(strcat(data_fold, 'data_for_figs/FreqisExplored_B1.mat'), 'FreqisExplored')

save(strcat(data_fold, 'data_for_figs/FreqisExploited_desc.mat'), 'FreqisExploited_desc')
save(strcat(data_fold, 'data_for_figs/FreqisExplored_desc.mat'), 'FreqisExplored_desc')


